<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>Habesha Games - Play & Win Money</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #059669;
      --primary-dark: #047857;
      --secondary: #10B981;
      --accent: #F59E0B;
      --accent-light: #FEF3C7;
      --bg-primary: #FFFFFF;
      --bg-secondary: #F8FAFC;
      --text-primary: #1F2937;
      --text-secondary: #6B7280;
      --glass-bg: rgba(255, 255, 255, 0.9);
      --glass-border: rgba(5, 150, 105, 0.1);
      --error: #EF4444;
      --success: #10B981;
      --shadow: rgba(0, 0, 0, 0.1);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: linear-gradient(135deg, #F0FDF4 0%, #ECFDF5 50%, #F0F9FF 100%);
      min-height: 100vh;
      overflow-x: hidden;
      position: relative;
      color: var(--text-primary);
      /* Telegram mini app optimized dimensions */
      max-width: 100vw;
      max-height: 100vh;
    }

    /* Animated Background Elements */
    .floating-element {
      position: absolute;
      opacity: 0.08;
      animation: float 15s infinite ease-in-out;
      pointer-events: none;
      z-index: 1;
    }

    .floating-element:nth-child(odd) {
      animation-direction: reverse;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      25% { transform: translateY(-15px) rotate(90deg); }
      50% { transform: translateY(-30px) rotate(180deg); }
      75% { transform: translateY(-15px) rotate(270deg); }
    }

    .chess-piece { font-size: 2.5rem; color: var(--primary); }
    .poker-card { font-size: 2rem; color: var(--accent); }
    .dice-number { font-size: 1.8rem; color: var(--secondary); }

    /* Main Container - Optimized for Telegram Mini App */
    .container {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 1rem;
      position: relative;
      z-index: 10;
      /* Telegram mini app specific */
      max-width: 100vw;
    }

    .auth-card {
      background: var(--glass-bg);
      backdrop-filter: blur(20px);
      border: 1px solid var(--glass-border);
      border-radius: 24px;
      padding: 2rem;
      width: 100%;
      max-width: 380px;
      box-shadow: 0 20px 40px var(--shadow);
      position: relative;
      overflow: hidden;
    }

    .auth-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, var(--primary), transparent);
      opacity: 0.3;
    }

    /* Header */
    .header {
      text-align: center;
      margin-bottom: 1.5rem;
    }

    .logo {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.75rem;
      margin-bottom: 1rem;
    }

    .logo-icon {
      width: 44px;
      height: 44px;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.4rem;
      color: white;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    .logo-text {
      font-size: 1.6rem;
      font-weight: 700;
      background: linear-gradient(135deg, var(--primary), var(--accent));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .welcome-text {
      font-size: 1rem;
      color: var(--text-secondary);
      margin-bottom: 0.5rem;
    }

    .tagline {
      font-size: 0.8rem;
      color: var(--accent);
      font-weight: 600;
      animation: glow 3s ease-in-out infinite alternate;
    }

    @keyframes glow {
      from { opacity: 0.8; }
      to { opacity: 1; text-shadow: 0 0 8px var(--accent); }
    }

    /* Auth Toggle */
    .auth-toggle {
      display: flex;
      background: var(--bg-secondary);
      border-radius: 16px;
      padding: 0.25rem;
      margin-bottom: 1.5rem;
      position: relative;
      border: 1px solid #E5E7EB;
    }

    .toggle-btn {
      flex: 1;
      padding: 0.7rem 1rem;
      border: none;
      background: transparent;
      color: var(--text-secondary);
      font-size: 0.85rem;
      font-weight: 500;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      z-index: 2;
    }

    .toggle-btn.active {
      color: white;
      background: var(--primary);
      box-shadow: 0 4px 12px rgba(5, 150, 105, 0.3);
    }

    /* Form Styles */
    .form {
      display: block;
    }

    .form.hidden {
      display: none;
    }

    .form-group {
      position: relative;
      margin-bottom: 1.2rem;
    }

    .form-label {
      display: block;
      font-size: 0.8rem;
      font-weight: 500;
      color: var(--text-secondary);
      margin-bottom: 0.4rem;
    }

    .form-input {
      width: 100%;
      padding: 0.9rem 0.9rem 0.9rem 0.9rem;
      background: white;
      border: 1.5px solid #E5E7EB;
      border-radius: 12px;
      color: var(--text-primary);
      font-size: 0.9rem;
      transition: all 0.3s ease;
      outline: none;
    }

    .form-input:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(5, 150, 105, 0.1);
      background: #FAFAFA;
    }

    .form-input::placeholder {
      color: var(--text-secondary);
      opacity: 0.7;
    }

    .input-icon {
      position: absolute;
      left: 1rem;
      top: 50%;
      transform: translateY(-50%);
      color: var(--text-secondary);
      font-size: 1rem;
      transition: color 0.3s ease;
    }

    .form-input:focus + .input-icon {
      color: var(--primary);
    }

    /* Submit Button */
    .submit-btn {
      width: 100%;
      padding: 0.9rem;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      border: none;
      border-radius: 12px;
      color: white;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      margin-bottom: 1rem;
    }

    .submit-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 6px 20px rgba(5, 150, 105, 0.4);
    }

    .submit-btn:active {
      transform: translateY(0);
    }

    .submit-btn:disabled {
      opacity: 0.7;
      cursor: not-allowed;
      transform: none;
    }

    .btn-content {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }

    .loader {
      width: 18px;
      height: 18px;
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-top: 2px solid white;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .hidden {
      display: none;
    }

    /* Error Message */
    .error-message {
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid rgba(239, 68, 68, 0.3);
      color: #DC2626;
      padding: 0.7rem;
      border-radius: 8px;
      font-size: 0.8rem;
      text-align: center;
      margin-top: 1rem;
      animation: shake 0.5s ease-in-out;
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      75% { transform: translateX(5px); }
    }

    /* Money Animation */
    .money-symbols {
      position: absolute;
      top: -40px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 0.8rem;
      opacity: 0;
      animation: moneyFall 3s ease-in-out infinite;
    }

    @keyframes moneyFall {
      0% { opacity: 0; transform: translateX(-50%) translateY(-40px); }
      50% { opacity: 1; transform: translateX(-50%) translateY(0px); }
      100% { opacity: 0; transform: translateX(-50%) translateY(40px); }
    }

    .money-symbol {
      font-size: 1.3rem;
      color: var(--accent);
    }

    /* Features Section */
    .features {
      margin-top: 1rem;
      padding-top: 1rem;
      border-top: 1px solid #E5E7EB;
    }

    .features-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 0.8rem;
      font-size: 0.75rem;
      color: var(--text-secondary);
    }

    .feature-item {
      display: flex;
      align-items: center;
      gap: 0.4rem;
    }

    .feature-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
    }

    .dot-green { background: #10B981; }
    .dot-blue { background: #3B82F6; }
    .dot-yellow { background: #F59E0B; }
    .dot-purple { background: #8B5CF6; }

    /* Bottom CTA */
    .bottom-cta {
      text-align: center;
      margin-top: 1rem;
      color: var(--text-secondary);
      font-size: 0.75rem;
    }

    /* Telegram Mini App Specific Optimizations */
    @media (max-height: 600px) {
      .container {
        padding: 0.5rem;
      }
      
      .auth-card {
        padding: 1.5rem;
        margin: 0.5rem;
      }
      
      .logo-text {
        font-size: 1.4rem;
      }
      
      .form-group {
        margin-bottom: 1rem;
      }
    }

    @media (max-width: 400px) {
      .auth-card {
        padding: 1.5rem;
        border-radius: 20px;
      }

      .logo-text {
        font-size: 1.4rem;
      }

      .welcome-text {
        font-size: 0.9rem;
      }

      .form-input {
        padding: 0.8rem 0.8rem 0.8rem 2.5rem;
        font-size: 0.85rem;
      }

      .input-icon {
        left: 0.8rem;
      }
    }

    /* Game Elements Positioning */
    .chess-1 { top: 8%; left: 5%; animation-delay: 0s; }
    .chess-2 { top: 15%; right: 8%; animation-delay: 2s; }
    .chess-3 { bottom: 12%; left: 10%; animation-delay: 4s; }
    .poker-1 { top: 25%; left: 12%; animation-delay: 1s; }
    .poker-2 { bottom: 20%; right: 5%; animation-delay: 3s; }
    .poker-3 { top: 12%; right: 15%; animation-delay: 5s; }
    .dice-1 { bottom: 8%; left: 15%; animation-delay: 1.5s; }
    .dice-2 { top: 20%; left: 6%; animation-delay: 3.5s; }
    .dice-3 { bottom: 25%; right: 12%; animation-delay: 5.5s; }
  </style>
</head>
<body>
  <!-- Floating Game Elements -->
  <div class="floating-element chess-piece chess-1">♛</div>
  <div class="floating-element chess-piece chess-2">♜</div>
  <div class="floating-element chess-piece chess-3">♞</div>
  <div class="floating-element poker-card poker-1">♠</div>
  <div class="floating-element poker-card poker-2">♥</div>
  <div class="floating-element poker-card poker-3">♦</div>
  <div class="floating-element dice-number dice-1">⚀</div>
  <div class="floating-element dice-number dice-2">⚃</div>
  <div class="floating-element dice-number dice-3">⚅</div>

  <div class="container">
    <div class="auth-card">
      <!-- Money Animation -->
      <div class="money-symbols">
        <span class="money-symbol">💰</span>
        <span class="money-symbol">💎</span>
        <span class="money-symbol">🏆</span>
      </div>

      <!-- Header -->
      <div class="header">
        <div class="logo">
          <div class="logo-icon">🎮</div>
          <div class="logo-text">Habesha Games</div>
        </div>
        <div class="welcome-text">Welcome! Ready to Play?</div>
        <div class="tagline">✨ Win Money While Gaming ✨</div>
      </div>

      <!-- Auth Toggle -->
      <div class="auth-toggle">
        <button class="toggle-btn active" id="loginToggle">Login</button>
        <button class="toggle-btn" id="registerToggle">Register</button>
      </div>

      <!-- Login Form -->
      <form class="form" id="loginForm">
        <div class="form-group">
          <label class="form-label">Phone Number</label>
          <input type="tel" class="form-input" id="loginPhone" placeholder="Enter your phone number" required>
        </div>
        <div class="form-group">
          <label class="form-label">Password</label>
          <input type="password" class="form-input" id="loginPassword" placeholder="Enter your password" required>
        </div>
        <button type="submit" class="submit-btn" id="loginBtn">
          <div class="btn-content">
            <span id="loginText">Login & Start Winning</span>
            <div class="loader hidden" id="loginLoader"></div>
          </div>
        </button>
        <div class="error-message hidden" id="loginError"></div>
      </form>

      <!-- Register Form -->
      <form class="form hidden" id="registerForm">
        <div class="form-group">
          <label class="form-label">Full Name</label>
          <input type="text" class="form-input" id="registerName" placeholder="Enter your full name" required>
          
        </div>
        <div class="form-group">
          <label class="form-label">Phone Number</label>
          <input type="tel" class="form-input" id="registerPhone" placeholder="Enter your phone number" required>
          
        </div>
        <div class="form-group">
          <label class="form-label">Password</label>
          <input type="password" class="form-input" id="registerPassword" placeholder="Create a password" required>
          
        </div>
        <div class="form-group">
          <label class="form-label">Confirm Password</label>
          <input type="password" class="form-input" id="confirmPassword" placeholder="Confirm your password" required>
          
        </div>
        <button type="submit" class="submit-btn" id="registerBtn">
          <div class="btn-content">
            <span id="registerText">Join & Win Money</span>
            <div class="loader hidden" id="registerLoader"></div>
          </div>
        </button>
        <div class="error-message hidden" id="registerError"></div>
      </form>

      <!-- Features -->
      <div class="features">
        <div class="features-grid">
          <div class="feature-item">
            <div class="feature-dot dot-green"></div>
            <span>Instant Withdrawals</span>
          </div>
          <div class="feature-item">
            <div class="feature-dot dot-blue"></div>
            <span>24/7 Support</span>
          </div>
          <div class="feature-item">
            <div class="feature-dot dot-yellow"></div>
            <span>Fair Play Guaranteed</span>
          </div>
          <div class="feature-item">
            <div class="feature-dot dot-purple"></div>
            <span>Secure Platform</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Bottom CTA -->
    <div class="bottom-cta">
      🎮 Join thousands of players • 💰 Win real money daily
    </div>
  </div>

  <script>
    // DOM Elements
    const loginToggle = document.getElementById('loginToggle');
    const registerToggle = document.getElementById('registerToggle');
    const loginForm = document.getElementById('loginForm');
    const registerForm = document.getElementById('registerForm');
    const loginBtn = document.getElementById('loginBtn');
    const registerBtn = document.getElementById('registerBtn');
    const loginText = document.getElementById('loginText');
    const registerText = document.getElementById('registerText');
    const loginLoader = document.getElementById('loginLoader');
    const registerLoader = document.getElementById('registerLoader');
    const loginError = document.getElementById('loginError');
    const registerError = document.getElementById('registerError');

    // Toggle between forms
    loginToggle.addEventListener('click', () => {
      loginToggle.classList.add('active');
      registerToggle.classList.remove('active');
      loginForm.classList.remove('hidden');
      registerForm.classList.add('hidden');
      clearErrors();
    });

    registerToggle.addEventListener('click', () => {
      registerToggle.classList.add('active');
      loginToggle.classList.remove('active');
      registerForm.classList.remove('hidden');
      loginForm.classList.add('hidden');
      clearErrors();
    });

    // Phone number formatting
    function formatPhoneNumber(phone) {
      const cleaned = phone.replace(/\D/g, '');
      
      if (cleaned.length === 10 && cleaned.startsWith('0')) {
        return `+251${cleaned.substring(1)}`;
      }
      
      if (cleaned.length === 9 && !cleaned.startsWith('0')) {
        return `+251${cleaned}`;
      }
      
      return cleaned.startsWith('+') ? cleaned : `+${cleaned}`;
    }

    // Show loading state
    function showLoading(isLogin) {
      if (isLogin) {
        loginText.classList.add('hidden');
        loginLoader.classList.remove('hidden');
        loginBtn.disabled = true;
      } else {
        registerText.classList.add('hidden');
        registerLoader.classList.remove('hidden');
        registerBtn.disabled = true;
      }
    }

    // Hide loading state
    function hideLoading(isLogin) {
      if (isLogin) {
        loginText.classList.remove('hidden');
        loginLoader.classList.add('hidden');
        loginBtn.disabled = false;
      } else {
        registerText.classList.remove('hidden');
        registerLoader.classList.add('hidden');
        registerBtn.disabled = false;
      }
    }

    // Show error message
    function showError(message, isLogin) {
      const errorElement = isLogin ? loginError : registerError;
      errorElement.textContent = message;
      errorElement.classList.remove('hidden');
      
      // Auto-hide error after 5 seconds
      setTimeout(() => {
        errorElement.classList.add('hidden');
      }, 5000);
    }

    // Clear all errors
    function clearErrors() {
      loginError.classList.add('hidden');
      registerError.classList.add('hidden');
    }

    // Simulate API calls (replace with actual Supabase integration)
    async function simulateLogin(phone, password) {
      return new Promise((resolve, reject) => {
        setTimeout(() => {
          // Simulate success/failure
          if (phone && password.length >= 6) {
            resolve({ success: true, user: { phone, name: 'Test User' } });
          } else {
            reject(new Error('Invalid phone number or password'));
          }
        }, 2000);
      });
    }

    async function simulateRegister(name, phone, password) {
      return new Promise((resolve, reject) => {
        setTimeout(() => {
          // Simulate success/failure
          if (name && phone && password.length >= 6) {
            resolve({ success: true, user: { name, phone } });
          } else {
            reject(new Error('Please fill all fields correctly'));
          }
        }, 2000);
      });
    }

    // Login form handler
    loginForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      clearErrors();
      
      const phone = document.getElementById('loginPhone').value.trim();
      const password = document.getElementById('loginPassword').value.trim();
      
      if (!phone || !password) {
        showError('Please fill in all fields', true);
        return;
      }

      const formattedPhone = formatPhoneNumber(phone);
      showLoading(true);

      try {
        const result = await simulateLogin(formattedPhone, password);
        
        // Store user data (replace with actual storage logic)
        localStorage.setItem('user', JSON.stringify(result.user));
        
        // Success animation
        loginText.textContent = 'Welcome Back! 🎉';
        
        // Redirect after success (replace with actual redirect)
        setTimeout(() => {
          alert('Login successful! Redirecting to games...');
          // window.location.href = 'home.html';
        }, 1000);
        
      } catch (error) {
        showError(error.message, true);
      } finally {
        hideLoading(true);
      }
    });

    // Register form handler
    registerForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      clearErrors();
      
      const name = document.getElementById('registerName').value.trim();
      const phone = document.getElementById('registerPhone').value.trim();
      const password = document.getElementById('registerPassword').value.trim();
      const confirmPassword = document.getElementById('confirmPassword').value.trim();
      
      if (!name || !phone || !password || !confirmPassword) {
        showError('Please fill in all fields', false);
        return;
      }

      if (password !== confirmPassword) {
        showError('Passwords do not match', false);
        return;
      }

      if (password.length < 6) {
        showError('Password must be at least 6 characters', false);
        return;
      }

      const formattedPhone = formatPhoneNumber(phone);
      showLoading(false);

      try {
        const result = await simulateRegister(name, formattedPhone, password);
        
        // Store user data (replace with actual storage logic)
        localStorage.setItem('user', JSON.stringify(result.user));
        
        // Success animation
        registerText.textContent = 'Welcome to Habesha Games! 🎉';
        
        // Redirect after success (replace with actual redirect)
        setTimeout(() => {
          alert('Registration successful! Welcome bonus added! Redirecting...');
          // window.location.href = 'home.html';
        }, 1000);
        
      } catch (error) {
        showError(error.message, false);
      } finally {
        hideLoading(false);
      }
    });

    // Add input focus animations
    document.querySelectorAll('.form-input').forEach(input => {
      input.addEventListener('focus', (e) => {
        e.target.parentElement.style.transform = 'scale(1.02)';
        e.target.parentElement.style.transition = 'transform 0.2s ease';
      });
      
      input.addEventListener('blur', (e) => {
        e.target.parentElement.style.transform = 'scale(1)';
      });
    });

    // Add money animation trigger on successful actions
    function triggerMoneyAnimation() {
      const moneySymbols = document.querySelector('.money-symbols');
      moneySymbols.style.animation = 'none';
      setTimeout(() => {
        moneySymbols.style.animation = 'moneyFall 3s ease-in-out';
      }, 100);
    }

    // Trigger money animation every 10 seconds
    setInterval(triggerMoneyAnimation, 10000);

    // Add particle effect on button hover
    document.querySelectorAll('.submit-btn').forEach(btn => {
      btn.addEventListener('mouseenter', () => {
        btn.style.boxShadow = '0 6px 20px rgba(5, 150, 105, 0.4), 0 0 15px rgba(245, 158, 11, 0.2)';
      });
      
      btn.addEventListener('mouseleave', () => {
        btn.style.boxShadow = '';
      });
    });

    // Telegram Mini App specific optimizations
    if (window.Telegram && window.Telegram.WebApp) {
      // Initialize Telegram WebApp
      window.Telegram.WebApp.ready();
      
      // Expand to full height
      window.Telegram.WebApp.expand();
      
      // Set theme colors
      window.Telegram.WebApp.setHeaderColor('#FFFFFF');
      window.Telegram.WebApp.setBackgroundColor('#FFFFFF');
    }
  </script>
</body>
</html>
